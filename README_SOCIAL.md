# Social Network - SNS ç¤¾äº¤ç½‘ç»œå¹³å°

ä¸€ä¸ªåŠŸèƒ½å®Œæ•´çš„ç¤¾äº¤ç½‘ç»œå¹³å°ï¼ŒåŸºäº Go + React æ„å»ºï¼Œæ”¯æŒå¥½å‹ç³»ç»Ÿã€æ¶ˆæ¯ã€åŠ¨æ€ã€æ”¯ä»˜ç­‰æ ¸å¿ƒç¤¾äº¤åŠŸèƒ½ã€‚

## é¡¹ç›®æ¦‚è¿°

æœ¬é¡¹ç›®æ˜¯ä¸€ä¸ªç°ä»£åŒ–çš„ç¤¾äº¤ç½‘ç»œæœåŠ¡ï¼ˆSNSï¼‰ï¼Œæä¾›å®Œæ•´çš„ç¤¾äº¤åŠŸèƒ½ï¼ŒåŒ…æ‹¬ç”¨æˆ·ç®¡ç†ã€å¥½å‹ç³»ç»Ÿã€ç§ä¿¡ã€åŠ¨æ€å‘å¸ƒã€è§†é¢‘é€šè¯ã€æ”¯ä»˜ç³»ç»Ÿç­‰ã€‚åŸºäº [uyou-go-api-starter](https://github.com/yeegeek/uyou-go-api-starter) è„šæ‰‹æ¶æ„å»ºã€‚

### æŠ€æœ¯æ ˆ

**åç«¯ï¼š**
- Go 1.24+
- Gin Web Framework
- PostgreSQLï¼ˆå…³ç³»å‹æ•°æ®ï¼‰
- MongoDBï¼ˆæ–‡æ¡£å‹æ•°æ®ï¼‰
- Redisï¼ˆç¼“å­˜å’Œé˜Ÿåˆ—ï¼‰
- JWT è®¤è¯
- Swagger API æ–‡æ¡£

**å‰ç«¯ï¼š**
- React 18+
- TypeScript
- shadcn/ui
- TailwindCSS
- React Router
- Axios

## åŠŸèƒ½æ¨¡å—

### å·²å®ç°åŠŸèƒ½ âœ…

1. **ç”¨æˆ·è®¤è¯ä¸æˆæƒ**
   - ç”¨æˆ·æ³¨å†Œ/ç™»å½•
   - JWT Token è®¤è¯
   - åˆ·æ–°ä»¤ç‰Œæœºåˆ¶
   - å¯†ç åŠ å¯†ï¼ˆbcryptï¼‰

2. **ç”¨æˆ·ç®¡ç†**
   - ç”¨æˆ·èµ„æ–™ç®¡ç†
   - å¤´åƒä¸Šä¼ 
   - ä¸ªäººä¿¡æ¯ç¼–è¾‘
   - VIP ä¼šå‘˜ç³»ç»Ÿ
   - åœ¨çº¿çŠ¶æ€ç®¡ç†
   - è™šæ‹Ÿè´§å¸ä½™é¢

3. **å¥½å‹ç³»ç»Ÿ**
   - å‘é€å¥½å‹è¯·æ±‚
   - æ¥å—/æ‹’ç»å¥½å‹è¯·æ±‚
   - åˆ é™¤å¥½å‹
   - å¥½å‹å¤‡æ³¨
   - å¥½å‹åˆ†ç»„
   - é»‘åå•ç®¡ç†

4. **æ•°æ®åº“è®¾è®¡**
   - ç”¨æˆ·è¡¨ï¼ˆæ‰©å±•å­—æ®µï¼‰
   - OAuth æä¾›å•†è¡¨
   - éªŒè¯ç è¡¨
   - å¥½å‹å…³ç³»è¡¨
   - é»‘åå•è¡¨

### è®¡åˆ’å®ç°åŠŸèƒ½ ğŸš§

5. **æ¶ˆæ¯ç³»ç»Ÿ**
   - ç§ä¿¡å‘é€/æ¥æ”¶
   - å¯¹è¯çº¿ç¨‹ç®¡ç†
   - æ¶ˆæ¯ç¿»è¯‘
   - è‰ç¨¿ä¿å­˜
   - æ¶ˆæ¯æ’¤å›

6. **åŠ¨æ€ç³»ç»Ÿ**
   - å‘å¸ƒ/åˆ é™¤åŠ¨æ€
   - ç‚¹èµ/è¯„è®º
   - å›¾ç‰‡/è§†é¢‘åˆ†äº«
   - åœ°ç†ä½ç½®

7. **åª’ä½“ç®¡ç†**
   - æ–‡ä»¶ä¸Šä¼ ï¼ˆå›¾ç‰‡/è§†é¢‘ï¼‰
   - ä»˜è´¹å†…å®¹
   - å†…å®¹å®¡æ ¸

8. **æ”¯ä»˜ç³»ç»Ÿ**
   - è™šæ‹Ÿè´§å¸å……å€¼
   - VIP å‡çº§
   - ä»˜è´¹å†…å®¹è´­ä¹°
   - äº¤æ˜“è®°å½•

9. **é€šçŸ¥ç³»ç»Ÿ**
   - å®æ—¶æ¨é€
   - ç¦»çº¿æ¨é€
   - é€šçŸ¥å†å²

10. **è§†é¢‘é€šè¯**
    - é€šè¯å‘èµ·/æ¥å—
    - é€šè¯è®°å½•
    - é€šè¯è®¡è´¹

11. **ç¿»è¯‘æœåŠ¡**
    - å¤šè¯­è¨€æ”¯æŒ
    - å®æ—¶ç¿»è¯‘

12. **æ¨å¹¿ç³»ç»Ÿ**
    - é‚€è¯·ç 
    - æ¨èå¥–åŠ±

13. **å®¢æœæ”¯æŒ**
    - ç”¨æˆ·æŠ•è¯‰
    - å®¢æœå›å¤

14. **ç®¡ç†å‘˜ç³»ç»Ÿ**
    - ç”¨æˆ·ç®¡ç†
    - å†…å®¹å®¡æ ¸
    - æ•°æ®ç»Ÿè®¡

## å¿«é€Ÿå¼€å§‹

### å‰ç½®è¦æ±‚

- Go 1.24+
- PostgreSQL 14+
- MongoDB 6.0+
- Redis 6.0+
- Node.js 18+ (å‰ç«¯å¼€å‘)

### åç«¯å¯åŠ¨

1. **é…ç½®ç¯å¢ƒå˜é‡**
```bash
export JWT_SECRET="social_network_jwt_secret_key_2026_very_secure_random_string_32_chars_min"
export DATABASE_HOST="localhost"
export DATABASE_USER="social_user"
export DATABASE_PASSWORD="social_pass123"
export DATABASE_NAME="social_network"
```

2. **å®‰è£…ä¾èµ–**
```bash
go mod download
```

3. **è¿è¡Œæ•°æ®åº“è¿ç§»**
```bash
go run cmd/migrate/main.go up
```

4. **å¯åŠ¨æœåŠ¡å™¨**
```bash
go run cmd/server/main.go
```

æœåŠ¡å™¨å°†åœ¨ `http://localhost:8080` å¯åŠ¨ã€‚

### è®¿é—® API æ–‡æ¡£

å¯åŠ¨æœåŠ¡å™¨åï¼Œè®¿é—®ï¼š
- Swagger UI: http://localhost:8080/swagger/index.html
- å¥åº·æ£€æŸ¥: http://localhost:8080/health

## API ç«¯ç‚¹

### è®¤è¯ç›¸å…³
- `POST /api/v1/auth/register` - ç”¨æˆ·æ³¨å†Œ
- `POST /api/v1/auth/login` - ç”¨æˆ·ç™»å½•
- `POST /api/v1/auth/refresh` - åˆ·æ–°ä»¤ç‰Œ
- `POST /api/v1/auth/logout` - ç”¨æˆ·ç™»å‡º
- `GET /api/v1/auth/me` - è·å–å½“å‰ç”¨æˆ·ä¿¡æ¯

### ç”¨æˆ·ç›¸å…³
- `GET /api/v1/users/:id` - è·å–ç”¨æˆ·ä¿¡æ¯
- `PUT /api/v1/users/:id` - æ›´æ–°ç”¨æˆ·ä¿¡æ¯
- `DELETE /api/v1/users/:id` - åˆ é™¤ç”¨æˆ·

### å¥½å‹ç›¸å…³
- `GET /api/v1/friends` - è·å–å¥½å‹åˆ—è¡¨
- `POST /api/v1/friends/request` - å‘é€å¥½å‹è¯·æ±‚
- `GET /api/v1/friends/requests` - è·å–å¥½å‹è¯·æ±‚åˆ—è¡¨
- `POST /api/v1/friends/requests/:id/accept` - æ¥å—å¥½å‹è¯·æ±‚
- `POST /api/v1/friends/requests/:id/reject` - æ‹’ç»å¥½å‹è¯·æ±‚
- `DELETE /api/v1/friends/:id` - åˆ é™¤å¥½å‹
- `PUT /api/v1/friends/:id/remark` - è®¾ç½®å¥½å‹å¤‡æ³¨
- `PUT /api/v1/friends/:id/group` - è®¾ç½®å¥½å‹åˆ†ç»„
- `POST /api/v1/friends/:id/block` - æ‹‰é»‘ç”¨æˆ·
- `DELETE /api/v1/friends/:id/unblock` - å–æ¶ˆæ‹‰é»‘
- `GET /api/v1/friends/blocked` - è·å–é»‘åå•åˆ—è¡¨

### ç®¡ç†å‘˜ç›¸å…³
- `GET /api/v1/admin/users` - è·å–ç”¨æˆ·åˆ—è¡¨ï¼ˆç®¡ç†å‘˜ï¼‰
- `PUT /api/v1/admin/users/:id` - æ›´æ–°ç”¨æˆ·ä¿¡æ¯ï¼ˆç®¡ç†å‘˜ï¼‰
- `DELETE /api/v1/admin/users/:id` - åˆ é™¤ç”¨æˆ·ï¼ˆç®¡ç†å‘˜ï¼‰

## é¡¹ç›®ç»“æ„

```
.
â”œâ”€â”€ cmd/                    # åº”ç”¨ç¨‹åºå…¥å£
â”‚   â”œâ”€â”€ server/            # API æœåŠ¡å™¨
â”‚   â”œâ”€â”€ migrate/           # æ•°æ®åº“è¿ç§»å·¥å…·
â”‚   â””â”€â”€ scheduler/         # å®šæ—¶ä»»åŠ¡è°ƒåº¦å™¨
â”œâ”€â”€ internal/              # å†…éƒ¨åº”ç”¨ä»£ç 
â”‚   â”œâ”€â”€ auth/             # è®¤è¯æœåŠ¡
â”‚   â”œâ”€â”€ user/             # ç”¨æˆ·æ¨¡å—
â”‚   â”œâ”€â”€ friend/           # å¥½å‹æ¨¡å—
â”‚   â”œâ”€â”€ health/           # å¥åº·æ£€æŸ¥
â”‚   â”œâ”€â”€ middleware/       # ä¸­é—´ä»¶
â”‚   â”œâ”€â”€ errors/           # é”™è¯¯å¤„ç†
â”‚   â”œâ”€â”€ config/           # é…ç½®ç®¡ç†
â”‚   â”œâ”€â”€ db/               # PostgreSQL æ•°æ®åº“
â”‚   â”œâ”€â”€ mongodb/          # MongoDB æ•°æ®åº“
â”‚   â”œâ”€â”€ redis/            # Redis ç¼“å­˜
â”‚   â””â”€â”€ server/           # æœåŠ¡å™¨è·¯ç”±
â”œâ”€â”€ migrations/            # æ•°æ®åº“è¿ç§»æ–‡ä»¶
â”œâ”€â”€ configs/              # é…ç½®æ–‡ä»¶
â”œâ”€â”€ api/                  # API æ–‡æ¡£å’Œ Swagger
â”œâ”€â”€ docs/                 # é¡¹ç›®æ–‡æ¡£
â”‚   â”œâ”€â”€ database_design.md      # æ•°æ®åº“è®¾è®¡æ–‡æ¡£
â”‚   â””â”€â”€ api_architecture.md     # API æ¶æ„è®¾è®¡æ–‡æ¡£
â”œâ”€â”€ frontend/             # å‰ç«¯ä»£ç 
â”œâ”€â”€ .env                  # ç¯å¢ƒå˜é‡é…ç½®
â”œâ”€â”€ go.mod                # Go æ¨¡å—ä¾èµ–
â””â”€â”€ README_SOCIAL.md      # é¡¹ç›®è¯´æ˜
```

## æ•°æ®åº“è®¾è®¡

è¯¦ç»†çš„æ•°æ®åº“è®¾è®¡è¯·æŸ¥çœ‹ï¼š[æ•°æ®åº“è®¾è®¡æ–‡æ¡£](docs/database_design.md)

### PostgreSQL è¡¨
- `users` - ç”¨æˆ·è¡¨ï¼ˆæ‰©å±•å­—æ®µï¼šusername, phone, avatar_url, gender, birthday, country, city, bio, language, is_vip, vip_expires_at, is_online, last_active_at, status, coins, fingerprintï¼‰
- `oauth_providers` - OAuth æä¾›å•†
- `verification_codes` - éªŒè¯ç 
- `friendships` - å¥½å‹å…³ç³»
- `blacklist` - é»‘åå•
- `refresh_tokens` - åˆ·æ–°ä»¤ç‰Œ
- `roles` - è§’è‰²
- `user_roles` - ç”¨æˆ·è§’è‰²å…³ç³»

### MongoDB é›†åˆï¼ˆè®¡åˆ’ï¼‰
- `messages` - ç§ä¿¡
- `conversations` - å¯¹è¯åˆ—è¡¨
- `posts` - åŠ¨æ€/å¸–å­
- `notifications` - é€šçŸ¥
- `visitor_logs` - è®¿å®¢è®°å½•

## å¼€å‘æŒ‡å—

### æ·»åŠ æ–°æ¨¡å—

1. åœ¨ `internal/` ç›®å½•ä¸‹åˆ›å»ºæ–°æ¨¡å—ç›®å½•
2. å®ç°ä»¥ä¸‹æ–‡ä»¶ï¼š
   - `model.go` - æ•°æ®æ¨¡å‹
   - `dto.go` - æ•°æ®ä¼ è¾“å¯¹è±¡
   - `repository.go` - æ•°æ®è®¿é—®å±‚
   - `service.go` - ä¸šåŠ¡é€»è¾‘å±‚
   - `handler.go` - HTTP å¤„ç†å±‚

3. åœ¨ `internal/server/router.go` ä¸­æ³¨å†Œè·¯ç”±
4. åœ¨ `cmd/server/main.go` ä¸­åˆå§‹åŒ–æ¨¡å—

### æ•°æ®åº“è¿ç§»

åˆ›å»ºæ–°è¿ç§»ï¼š
```bash
go run cmd/migrate/main.go create add_new_table
```

æ‰§è¡Œè¿ç§»ï¼š
```bash
go run cmd/migrate/main.go up
```

å›æ»šè¿ç§»ï¼š
```bash
go run cmd/migrate/main.go down
```

### ç”Ÿæˆ Swagger æ–‡æ¡£

```bash
swag init -g cmd/server/main.go -o api/docs
```

## æµ‹è¯•

è¿è¡Œæµ‹è¯•ï¼š
```bash
go test ./...
```

è¿è¡Œæµ‹è¯•å¹¶æŸ¥çœ‹è¦†ç›–ç‡ï¼š
```bash
go test -cover ./...
```

## å®‰å…¨ç‰¹æ€§

- JWT Token è®¤è¯
- å¯†ç åŠ å¯†ï¼ˆbcryptï¼‰
- IP é™æµ
- è¾“å…¥éªŒè¯
- SQL æ³¨å…¥é˜²æŠ¤
- XSS é˜²æŠ¤
- CSRF é˜²æŠ¤

## æ€§èƒ½ä¼˜åŒ–

- æ•°æ®åº“è¿æ¥æ± 
- Redis ç¼“å­˜
- æŸ¥è¯¢ä¼˜åŒ–
- ç´¢å¼•ä¼˜åŒ–
- åˆ†é¡µæŸ¥è¯¢
- å¼‚æ­¥ä»»åŠ¡å¤„ç†

## è´¡çŒ®æŒ‡å—

æ¬¢è¿è´¡çŒ®ä»£ç ï¼è¯·éµå¾ªä»¥ä¸‹æ­¥éª¤ï¼š

1. Fork æœ¬ä»“åº“
2. åˆ›å»ºç‰¹æ€§åˆ†æ”¯ (`git checkout -b feature/AmazingFeature`)
3. æäº¤æ›´æ”¹ (`git commit -m 'Add some AmazingFeature'`)
4. æ¨é€åˆ°åˆ†æ”¯ (`git push origin feature/AmazingFeature`)
5. å¼€å¯ Pull Request

## è®¸å¯è¯

æœ¬é¡¹ç›®é‡‡ç”¨ MIT è®¸å¯è¯ã€‚è¯¦è§ [LICENSE](LICENSE) æ–‡ä»¶ã€‚

## è”ç³»æ–¹å¼

- é¡¹ç›®ä¸»é¡µ: https://github.com/yeegeek/social
- é—®é¢˜åé¦ˆ: https://github.com/yeegeek/social/issues

## è‡´è°¢

- [uyou-go-api-starter](https://github.com/yeegeek/uyou-go-api-starter) - é¡¹ç›®è„šæ‰‹æ¶
- [Gin](https://github.com/gin-gonic/gin) - Web æ¡†æ¶
- [GORM](https://gorm.io/) - ORM åº“
- [shadcn/ui](https://ui.shadcn.com/) - UI ç»„ä»¶åº“
